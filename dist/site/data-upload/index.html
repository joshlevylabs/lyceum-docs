
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../authentication/">
      
      
        <link rel="next" href="../apis/">
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Data Upload - Lyceum API Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-upload-to-lyceum-platform" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Lyceum API Documentation" class="md-header__button md-logo" aria-label="Lyceum API Documentation" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lyceum API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data Upload
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Lyceum API Documentation" class="md-nav__button md-logo" aria-label="Lyceum API Documentation" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    Lyceum API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Data Upload
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Data Upload
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Data Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-json-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Initial JSON Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-add-project-name" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Add Project Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-convert-global-properties-to-descriptors" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Convert Global Properties to Descriptors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-remove-unwanted-descriptor-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Remove Unwanted Descriptor Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-descriptors-with-uuids" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Update Descriptors with UUIDs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-process-checked-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Process Checked Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 5: Process Checked Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Process Overview
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-association" class="md-nav__link">
    <span class="md-ellipsis">
      Group Association
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Group Association">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetch-available-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch Available Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-a-group" class="md-nav__link">
    <span class="md-ellipsis">
      Select a Group
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unit Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetch-unit-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch Unit Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply-unit-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Apply Unit Mappings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace-units-with-details" class="md-nav__link">
    <span class="md-ellipsis">
      Replace Units with Details
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle-unmatched-units" class="md-nav__link">
    <span class="md-ellipsis">
      Handle Unmatched Units
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-to-s3" class="md-nav__link">
    <span class="md-ellipsis">
      Uploading to S3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uploading to S3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtain-temporary-aws-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Obtain Temporary AWS Credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construct-the-s3-object-key" class="md-nav__link">
    <span class="md-ellipsis">
      Construct the S3 Object Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-the-file" class="md-nav__link">
    <span class="md-ellipsis">
      Upload the File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notify-the-lyceum-api" class="md-nav__link">
    <span class="md-ellipsis">
      Notify the Lyceum API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling and Logging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Final Notes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    All API Endpoints
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Data Preparation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Preparation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-json-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Initial JSON Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-add-project-name" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Add Project Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-convert-global-properties-to-descriptors" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Convert Global Properties to Descriptors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-remove-unwanted-descriptor-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Remove Unwanted Descriptor Properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-update-descriptors-with-uuids" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Update Descriptors with UUIDs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-process-checked-data" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Process Checked Data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 5: Process Checked Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Process Overview
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-association" class="md-nav__link">
    <span class="md-ellipsis">
      Group Association
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Group Association">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetch-available-groups" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch Available Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-a-group" class="md-nav__link">
    <span class="md-ellipsis">
      Select a Group
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unit-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Unit Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fetch-unit-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch Unit Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply-unit-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Apply Unit Mappings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace-units-with-details" class="md-nav__link">
    <span class="md-ellipsis">
      Replace Units with Details
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle-unmatched-units" class="md-nav__link">
    <span class="md-ellipsis">
      Handle Unmatched Units
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-to-s3" class="md-nav__link">
    <span class="md-ellipsis">
      Uploading to S3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uploading to S3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtain-temporary-aws-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Obtain Temporary AWS Credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construct-the-s3-object-key" class="md-nav__link">
    <span class="md-ellipsis">
      Construct the S3 Object Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload-the-file" class="md-nav__link">
    <span class="md-ellipsis">
      Upload the File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notify-the-lyceum-api" class="md-nav__link">
    <span class="md-ellipsis">
      Notify the Lyceum API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling and Logging
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Final Notes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="data-upload-to-lyceum-platform">Data Upload to Lyceum Platform</h1>
<p>This document provides a comprehensive guide for third parties to upload data to the Lyceum platform. The process involves preparing data in a specific JSON format, associating it with a group, handling units, and uploading it to an AWS S3 bucket while notifying the Lyceum API. This guide is based on the <code>FormLyceumDataUpload</code> C# script, which serves as a reference implementation.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before initiating the upload process, ensure you have the following:</p>
<ul>
<li><strong>Authentication Tokens:</strong> Obtain an access token and a refresh token by authenticating with the Lyceum API. These are required for all API interactions. Refer to your authentication documentation for details.</li>
<li><strong>Session Title:</strong> A unique title for the project or session being uploaded (e.g., "MyProject").</li>
<li><strong>Session Data:</strong> The data to be uploaded, provided as a JSON string or file.</li>
<li><strong>Unit Mappings (Optional):</strong> A dictionary mapping units in your data (e.g., "Volts") to Lyceum-compatible units (e.g., "V"). This can be provided programmatically or loaded from a file (e.g., <code>unit_mappings.json</code>).</li>
<li><strong>Environment Variables (Optional):</strong></li>
<li><code>LYCEUM_API_BASE</code>: The base URL for the Lyceum API (defaults to <code>https://api.thelyceum.io/api</code> if not set).</li>
<li><code>LYCEUM_BUCKET</code>: The S3 bucket name (defaults to <code>lyceum-prod</code> if not set).</li>
</ul>
<h2 id="data-preparation">Data Preparation</h2>
<p>The data must be structured as a JSON object and undergo specific transformations to meet Lyceum’s requirements.</p>
<h3 id="initial-json-structure">Initial JSON Structure</h3>
<p>The input JSON should include the following key fields:</p>
<ul>
<li><strong>GlobalProperties (Optional):</strong> An object containing metadata key-value pairs (e.g., <code>"Manufacturer": "ABC Corp"</code>).</li>
<li><strong>CheckedData (Optional):</strong> An array of objects representing measurement data to be processed.</li>
<li><strong>descriptor (Optional):</strong> An array of metadata objects with <code>label</code> and <code>value</code> fields.</li>
</ul>
<p><strong>Example Input JSON:</strong></p>
<pre><code class="language-json">{
  &quot;GlobalProperties&quot;: {
    &quot;Manufacturer&quot;: &quot;ABC Corp&quot;,
    &quot;Model&quot;: &quot;XYZ&quot;
  },
  &quot;CheckedData&quot;: [
    {
      &quot;Name&quot;: &quot;Path1&quot;,
      &quot;Measurements&quot;: [
        {
          &quot;Name&quot;: &quot;FreqResponse&quot;,
          &quot;Results&quot;: [
            {
              &quot;Name&quot;: &quot;Amplitude&quot;,
              &quot;ResultValueType&quot;: &quot;XY Values&quot;,
              &quot;ChannelCount&quot;: 1,
              &quot;Passed&quot;: true,
              &quot;XUnit&quot;: &quot;Hz&quot;,
              &quot;YUnit&quot;: &quot;dB&quot;,
              &quot;XValues&quot;: [20, 20000],
              &quot;YValuesPerChannel&quot;: {
                &quot;Ch1&quot;: [0.1, 0.2]
              }
            }
          ]
        }
      ]
    }
  ]
}
</code></pre>
<h3 id="step-1-add-project-name">Step 1: Add Project Name</h3>
<p>Add a <code>ProjectName</code> field to the JSON root, using the session title provided.</p>
<p><strong>Transformation:</strong></p>
<pre><code class="language-json">{
  &quot;ProjectName&quot;: &quot;MyProject&quot;,
  &quot;GlobalProperties&quot;: { /* ... */ },
  &quot;CheckedData&quot;: [ /* ... */ ]
}
</code></pre>
<h3 id="step-2-convert-global-properties-to-descriptors">Step 2: Convert Global Properties to Descriptors</h3>
<p>If <code>GlobalProperties</code> exists, convert it to a <code>descriptor</code> array where each property becomes an object with <code>label</code> and <code>value</code> fields. Remove the original <code>GlobalProperties</code> field.</p>
<p><strong>Before:</strong></p>
<pre><code class="language-json">{
  &quot;GlobalProperties&quot;: {
    &quot;Manufacturer&quot;: &quot;ABC Corp&quot;,
    &quot;Model&quot;: &quot;XYZ&quot;
  }
}
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="language-json">{
  &quot;descriptor&quot;: [
    {&quot;label&quot;: &quot;Manufacturer&quot;, &quot;value&quot;: &quot;ABC Corp&quot;},
    {&quot;label&quot;: &quot;Model&quot;, &quot;value&quot;: &quot;XYZ&quot;}
  ]
}
</code></pre>
<h3 id="step-3-remove-unwanted-descriptor-properties">Step 3: Remove Unwanted Descriptor Properties</h3>
<p>Remove the following properties from the <code>descriptor</code> array if present:</p>
<ul>
<li>SequenceName</li>
<li>ProjectDir</li>
<li>APxDir</li>
<li>Date</li>
<li>Day</li>
<li>Month</li>
<li>Year</li>
<li>Time</li>
<li>Hour</li>
<li>Minute</li>
<li>Second</li>
<li>Millisecond</li>
</ul>
<p><strong>Example:</strong></p>
<p><strong>Before:</strong></p>
<pre><code class="language-json">{
  &quot;descriptor&quot;: [
    {&quot;label&quot;: &quot;Manufacturer&quot;, &quot;value&quot;: &quot;ABC Corp&quot;},
    {&quot;label&quot;: &quot;Date&quot;, &quot;value&quot;: &quot;2023-10-01&quot;}
  ]
}
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="language-json">{
  &quot;descriptor&quot;: [
    {&quot;label&quot;: &quot;Manufacturer&quot;, &quot;value&quot;: &quot;ABC Corp&quot;}
  ]
}
</code></pre>
<h3 id="step-4-update-descriptors-with-uuids">Step 4: Update Descriptors with UUIDs</h3>
<p>Fetch descriptor metadata from the Lyceum API (<code>GET /project/metadata/</code>) and update the <code>descriptor</code> array. Replace <code>label</code> values with corresponding UUIDs or values from the API where applicable.</p>
<p><strong>API Request:</strong></p>
<pre><code class="language-bash">curl -X GET https://api.thelyceum.io/api/project/metadata/ \
  -H &quot;Authorization: Bearer your_access_token&quot;
</code></pre>
<p><strong>Transformation Example:</strong></p>
<p><strong>Before:</strong></p>
<pre><code class="language-json">{
  &quot;descriptor&quot;: [
    {&quot;label&quot;: &quot;Manufacturer&quot;, &quot;value&quot;: &quot;ABC Corp&quot;}
  ]
}
</code></pre>
<p><strong>After (assuming API provides UUIDs):</strong></p>
<pre><code class="language-json">{
  &quot;descriptor&quot;: [
    {&quot;label&quot;: &quot;ABC Corp&quot;, &quot;value&quot;: &quot;uuid-from-api&quot;}
  ]
}
</code></pre>
<h3 id="step-5-process-checked-data">Step 5: Process Checked Data</h3>
<p>If <code>CheckedData</code> exists, transform it into <code>ProcessedCheckedData</code>. This involves restructuring measurement results into a format with <code>Details</code>, <code>Units</code>, <code>Properties</code>, and <code>Data</code> sections.</p>
<h4 id="process-overview">Process Overview</h4>
<ul>
<li><strong>Data Type:</strong> Assume "Measurement" (hardcoded in the script).</li>
<li><strong>Device Label:</strong> Extract from <code>descriptor</code> where <code>value</code> matches a specific UUID (e.g., "9f7da84a-14f3-4407-90e2-40aad2ba81cb"), or use a fallback.</li>
<li><strong>Transformation:</strong> For each result in <code>CheckedData</code>, create a new object with:</li>
<li><code>Details</code>: Metadata like name, result type, and pass/fail status.</li>
<li><code>Units</code>: XUnit, YUnit, or MeterUnit based on <code>ResultValueType</code>.</li>
<li><code>Properties</code>: Additional metadata excluding specified keys.</li>
<li><code>Data</code>: Processed values with renamed channels.</li>
</ul>
<p><strong>Example Transformation:</strong></p>
<p><strong>Before:</strong></p>
<pre><code class="language-json">{
  &quot;CheckedData&quot;: [
    {
      &quot;Name&quot;: &quot;Path1&quot;,
      &quot;Measurements&quot;: [
        {
          &quot;Name&quot;: &quot;FreqResponse&quot;,
          &quot;Results&quot;: [
            {
              &quot;Name&quot;: &quot;Amplitude&quot;,
              &quot;ResultValueType&quot;: &quot;XY Values&quot;,
              &quot;ChannelCount&quot;: 1,
              &quot;Passed&quot;: true,
              &quot;XUnit&quot;: &quot;Hz&quot;,
              &quot;YUnit&quot;: &quot;dB&quot;,
              &quot;XValues&quot;: [20, 20000],
              &quot;YValuesPerChannel&quot;: {
                &quot;Ch1&quot;: [0.1, 0.2]
              }
            }
          ]
        }
      ]
    }
  ]
}
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="language-json">{
  &quot;ProcessedCheckedData&quot;: [
    {
      &quot;Details&quot;: {
        &quot;Name&quot;: &quot;Path1 - FreqResponse - Amplitude&quot;,
        &quot;ResultValueType&quot;: &quot;XY Values&quot;,
        &quot;ChannelCount&quot;: 1,
        &quot;Passed&quot;: true,
        &quot;data_types&quot;: &quot;Measurement&quot;
      },
      &quot;Units&quot;: {
        &quot;XUnit&quot;: &quot;Hz&quot;,
        &quot;YUnit&quot;: &quot;dB&quot;
      },
      &quot;Properties&quot;: {},
      &quot;Data&quot;: {
        &quot;XValues&quot;: [20, 20000],
        &quot;YValuesPerChannel&quot;: {
          &quot;DeviceLabel - Ch1&quot;: [0.1, 0.2]
        }
      }
    }
  ]
}
</code></pre>
<p>Remove the original <code>CheckedData</code> field after processing.</p>
<h2 id="group-association">Group Association</h2>
<p>Associate the data with a group in the Lyceum system, either by using a saved group or selecting one via the API.</p>
<h3 id="fetch-available-groups">Fetch Available Groups</h3>
<p>Send a GET request to <code>/organization/groups/</code> to retrieve available groups.</p>
<p><strong>Request:</strong></p>
<pre><code class="language-bash">curl -X GET https://api.thelyceum.io/api/organization/groups/ \
  -H &quot;Authorization: Bearer your_access_token&quot;
</code></pre>
<p><strong>Response Example:</strong></p>
<pre><code class="language-json">[
  {&quot;id&quot;: &quot;group_uuid1&quot;, &quot;name&quot;: &quot;Group1&quot;},
  {&quot;id&quot;: &quot;group_uuid2&quot;, &quot;name&quot;: &quot;Group2&quot;}
]
</code></pre>
<h3 id="select-a-group">Select a Group</h3>
<ul>
<li><strong>Option 1: Saved Group:</strong> Use a predefined group ID and name if available (e.g., from a config file).</li>
<li><strong>Option 2: User Selection:</strong> Implement a selection mechanism (e.g., a dropdown) to choose a group from the API response.</li>
</ul>
<p>Append the selected group details to the JSON under <code>GroupDetails</code>.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-json">{
  &quot;GroupDetails&quot;: {
    &quot;group_name&quot;: &quot;Group1&quot;,
    &quot;group_id&quot;: &quot;group_uuid1&quot;
  }
}
</code></pre>
<h2 id="unit-handling">Unit Handling</h2>
<p>Ensure units in <code>ProcessedCheckedData</code> are compatible with Lyceum’s unit system.</p>
<h3 id="fetch-unit-metadata">Fetch Unit Metadata</h3>
<p>Retrieve unit metadata from the Lyceum API (<code>GET /project/metadata/</code>).</p>
<p><strong>Request:</strong></p>
<pre><code class="language-bash">curl -X GET https://api.thelyceum.io/api/project/metadata/ \
  -H &quot;Authorization: Bearer your_access_token&quot;
</code></pre>
<p><strong>Response Example:</strong></p>
<pre><code class="language-json">{
  &quot;x_units&quot;: [
    {&quot;label&quot;: &quot;Hz&quot;, &quot;symbol&quot;: &quot;Hz&quot;, &quot;magnitude_symbol&quot;: &quot;&quot;}
  ],
  &quot;y_units&quot;: [
    {&quot;label&quot;: &quot;dB&quot;, &quot;symbol&quot;: &quot;dB&quot;, &quot;magnitude_symbol&quot;: &quot;&quot;}
  ]
}
</code></pre>
<h3 id="apply-unit-mappings">Apply Unit Mappings</h3>
<p>Map units in your data to Lyceum units using a provided dictionary. For example:</p>
<ul>
<li><code>"Volts"</code> → <code>"V"</code></li>
</ul>
<p><strong>Transformation:</strong></p>
<p><strong>Before:</strong></p>
<pre><code class="language-json">{
  &quot;ProcessedCheckedData&quot;: [
    {
      &quot;Units&quot;: {
        &quot;YUnit&quot;: &quot;Volts&quot;
      }
    }
  ]
}
</code></pre>
<p><strong>After (with mapping "Volts" → "V"):</strong></p>
<pre><code class="language-json">{
  &quot;ProcessedCheckedData&quot;: [
    {
      &quot;Units&quot;: {
        &quot;YUnit&quot;: &quot;V&quot;
      }
    }
  ]
}
</code></pre>
<h3 id="replace-units-with-details">Replace Units with Details</h3>
<p>Replace unit strings with full unit details from the API.</p>
<p><strong>After:</strong></p>
<pre><code class="language-json">{
  &quot;ProcessedCheckedData&quot;: [
    {
      &quot;Units&quot;: {
        &quot;YUnit&quot;: {
          &quot;label&quot;: &quot;V&quot;,
          &quot;symbol&quot;: &quot;V&quot;,
          &quot;magnitude_symbol&quot;: &quot;&quot;
        }
      }
    }
  ]
}
</code></pre>
<h3 id="handle-unmatched-units">Handle Unmatched Units</h3>
<p>For units not found in the metadata or mappings, implement a mechanism to:
- Prompt the user to select a matching unit from available options.
- Update the mappings and reapply them.</p>
<h2 id="uploading-to-s3">Uploading to S3</h2>
<p>Upload the prepared JSON file to the Lyceum S3 bucket and notify the API.</p>
<h3 id="obtain-temporary-aws-credentials">Obtain Temporary AWS Credentials</h3>
<p>Fetch credentials from the Lyceum API (<code>GET /account/get_aws_token/</code>).</p>
<p><strong>Request:</strong></p>
<pre><code class="language-bash">curl -X GET https://api.thelyceum.io/api/account/get_aws_token/ \
  -H &quot;Authorization: Bearer your_access_token&quot;
</code></pre>
<p><strong>Response Example:</strong></p>
<pre><code class="language-json">{
  &quot;Credentials&quot;: {
    &quot;AccessKeyId&quot;: &quot;your_access_key&quot;,
    &quot;SecretAccessKey&quot;: &quot;your_secret_key&quot;,
    &quot;SessionToken&quot;: &quot;your_session_token&quot;
  }
}
</code></pre>
<h3 id="construct-the-s3-object-key">Construct the S3 Object Key</h3>
<p>Use the following structure:</p>
<pre><code>media/native-app-uploads/{project_name}/{unique_folder}/{unique_file_name}.json
</code></pre>
<ul>
<li><code>{project_name}</code>: Value of <code>ProjectName</code> (e.g., "MyProject").</li>
<li><code>{unique_folder}</code>: A unique identifier (e.g., a GUID).</li>
<li><code>{unique_file_name}</code>: A timestamped name (e.g., "MyProject_20231001120000.json").</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code>media/native-app-uploads/MyProject/550e8400-e29b-41d4-a716-446655440000/MyProject_20231001120000.json
</code></pre>
<h3 id="upload-the-file">Upload the File</h3>
<p>Use an AWS S3 client with the temporary credentials to upload the JSON file to the bucket (default: <code>lyceum-prod</code>).</p>
<p><strong>Pseudo-code:</strong></p>
<pre><code class="language-python">s3_client = boto3.client(
    's3',
    aws_access_key_id=access_key_id,
    aws_secret_access_key=secret_access_key,
    aws_session_token=session_token,
    region_name='us-west-1'
)
s3_client.upload_file('temp.json', 'lyceum-prod', 'media/native-app-uploads/MyProject/...')
</code></pre>
<h3 id="notify-the-lyceum-api">Notify the Lyceum API</h3>
<p>Send a POST request to <code>/project/v2/upload/native/</code> with the upload details.</p>
<p><strong>Payload:</strong></p>
<pre><code class="language-json">{
  &quot;file_url&quot;: &quot;https://lyceum-prod.s3.amazonaws.com/media/native-app-uploads/MyProject/.../MyProject_20231001120000.json&quot;,
  &quot;v2_json_file_url&quot;: &quot;https://lyceum-prod.s3.amazonaws.com/media/native-app-uploads/MyProject/.../MyProject_20231001120000.json&quot;,
  &quot;name&quot;: &quot;MyProject&quot;,
  &quot;tags&quot;: [],
  &quot;descriptors&quot;: [
    {&quot;descriptor&quot;: &quot;uuid-from-api&quot;},
    {&quot;descriptor&quot;: &quot;XYZ&quot;}
  ],
  &quot;groups&quot;: [&quot;group_uuid1&quot;]
}
</code></pre>
<p><strong>Request:</strong></p>
<pre><code class="language-bash">curl -X POST https://api.thelyceum.io/api/project/v2/upload/native/ \
  -H &quot;Authorization: Bearer your_access_token&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d @payload.json
</code></pre>
<p>Ensure URLs are properly escaped.</p>
<h2 id="error-handling-and-logging">Error Handling and Logging</h2>
<p>Implement robust error handling and logging to troubleshoot issues:</p>
<ul>
<li><strong>Authentication Errors:</strong> Handle token expiration and refresh.</li>
<li><strong>JSON Validation:</strong> Validate data format before processing.</li>
<li><strong>Unit Mismatches:</strong> Log and address unmatched units.</li>
<li><strong>S3 Upload Failures:</strong> Retry or report errors.</li>
<li><strong>API Notification Failures:</strong> Log response codes and messages.</li>
</ul>
<p><strong>Example Log Entries:</strong></p>
<pre><code>✅ Data saved to temp.json
❌ ERROR: Failed to fetch AWS credentials: 401 Unauthorized
📡 Uploaded to S3: media/native-app-uploads/MyProject/...
</code></pre>
<h2 id="final-notes">Final Notes</h2>
<ul>
<li><strong>Security:</strong> Securely handle AWS credentials and tokens.</li>
<li><strong>Validation:</strong> Ensure all required fields are present and correctly formatted.</li>
<li><strong>Reference:</strong> Consult the <code>FormLyceumDataUpload</code> C# script for detailed logic, especially for <code>CheckedData</code> processing.</li>
</ul>
<p>For further assistance, contact Lyceum support or refer to the script’s source code.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>